# ETH Distributor

一个基于智能合约的 ETH 批量分发工具，支持多钱包操作和批量跨链功能。

## 功能特点

- 支持批量分发 ETH 到多个地址
- 智能合约确保交易安全性
- 支持多钱包批处理
- 内置跨链功能
- 随机延迟机制防止交易拥堵
- 完整的错误处理和日志记录


## 使用步骤

### 1. 环境准备

确保已安装 Node.js 和必要的依赖：

```bash
npm install ethers solc fs
```

### 2. 跨链，使用testnetbridge合约，从Arbitrum主网跨到Sepolia测试网

1. 确保 `pk.txt` 中包含需要进行跨链操作的钱包私钥
2. 运行跨链脚本：
```bash
node swapAndBridge.js
```

### 3. 合约部署

1. 编译合约：
```bash
node compile.js
```

2. 准备部署钱包：
- 在 `deployer-pk.txt` 中填入部署钱包的私钥

3. 部署合约：
```bash
node deploy.js
```
部署成功后，合约地址将保存在 `contract-address.txt` 中。

### 4. ETH 分发

1. 准备接收地址：
- 在 `address.txt` 中每行填入一个接收地址
- 地址会自动按每组4个进行分组，增加单组地址数量修改distribute.js中的数量，代码文件中写了修改提示

2. 准备发送钱包：
- 私钥数量应大于或等于地址组数，比如要分发的地址有100个，那么私钥数量不能低于100/4=25个，计算公式为：地址数量/单组地址数量=私钥数量

3. 运行分发脚本：
```bash
node distribute.js
```


## 配置说明

### 分发配置（distribute.js）

- `amountPerAddress`：每个地址获得的 ETH 数量
- 随机延迟：1-30秒，可在代码中调整
- Gas 限制：默认 500000，可根据需要调整

### 跨链配置（swapAndBridge.js）

- `ethAmount`：跨链金额
- `gasPrice`：固定为 0.01 Gwei
- `gasLimit`：固定为 5000000
- Layer Zero 费用：0.000005527010792368 ETH，如果费用不足，请自行调整，可以先手动分发一笔，然后查看费用，再调整

## 安全提示

- 私钥文件请妥善保管，建议本地运行
- 建议先用小额测试
- 确保钱包有足够的 ETH 支付 gas 费
- 执行前仔细检查配置参数

## 网络支持

- 部署和分发支持 Sepolia 测试网，其他网络需修改Rpc
- 跨链功能支持 Arbitrum 主网，其他网络修改Rpc和合约地址

## 错误处理

- 所有脚本都包含完整的错误处理机制
- 失败的交易会记录详细错误信息
- 单个钱包失败不影响其他钱包的处理

## 日志记录

- 详细记录每笔交易的状态
- 显示交易哈希、区块确认等信息
- 记录钱包处理进度和错误信息

## 注意事项

1. 确保网络连接稳定
2. 检查钱包余额是否充足
3. 确认接收地址格式正确
4. 注意 gas 费用设置
5. 建议在测试网络先行测试

## 常见问题

1. **Q: 如何修改每个地址的接收金额？**  
   A: 在 `distribute.js` 中修改 `amountPerAddress` 变量

2. **Q: 如何调整交易延迟时间？**  
   A: 在脚本中修改 `delay` 的范围（默认 1-30 秒）

3. **Q: 私钥文件格式是什么？**  
   A: 纯文本文件，每行一个私钥，不含 "0x" 前缀